<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VASILEV ILIA | Taplink</title>
    <meta
      name="description"
      content="Minimal black-and-white taplink with Telegram, WeChat, email, and phone."
    />
    <meta name="theme-color" content="#f2f2f2" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Days+One&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="page">
      <section class="hero" aria-label="Profile">
        <img
          class="avatar reveal reveal-0"
          src="assets/profile.jpg"
          alt="Profile photo"
          loading="eager"
          onerror="this.style.display='none'"
        />
        <h1 class="reveal reveal-1">VASILEV ILIA</h1>
        <p class="subtitle reveal reveal-2">
          CS Student • 3x World Champion • Full-Stack Builder
        </p>
      </section>

      <nav class="links" aria-label="Contact links">
        <a class="link reveal reveal-3" href="https://t.me/ilyavasiliev1" target="_blank" rel="noopener noreferrer">
          <span class="icon" aria-hidden="true">
            <i class="bi bi-telegram"></i>
          </span>
          <span class="link-text">Telegram</span>
          <span class="arrow" aria-hidden="true">›</span>
        </a>

        <a
          class="link reveal reveal-4 wechat-link"
          href="#"
          data-wechat-id="Vasilev_Ilia"
          aria-haspopup="dialog"
          aria-controls="wechatModal"
        >
          <span class="icon" aria-hidden="true">
            <i class="bi bi-wechat"></i>
          </span>
          <span class="link-text">WeChat</span>
          <span class="arrow" aria-hidden="true">›</span>
        </a>

        <a class="link reveal reveal-5" href="mailto:ilyavasiliev32@gmail.com">
          <span class="icon" aria-hidden="true">
            <i class="bi bi-envelope-fill"></i>
          </span>
          <span class="link-text">Email</span>
          <span class="arrow" aria-hidden="true">›</span>
        </a>

        <a class="link reveal reveal-6" href="tel:+8617822094122">
          <span class="icon" aria-hidden="true">
            <i class="bi bi-telephone-fill"></i>
          </span>
          <span class="link-text">Chinese Number</span>
          <span class="arrow" aria-hidden="true">›</span>
        </a>
      </nav>
    </main>

    <div class="wechat-modal" id="wechatModal" role="dialog" aria-modal="true" aria-labelledby="wechatModalTitle" hidden>
      <button class="wechat-modal__backdrop" type="button" aria-label="Close dialog" data-close-modal></button>
      <div class="wechat-modal__card" role="document">
        <button class="wechat-modal__close" type="button" aria-label="Close dialog" data-close-modal></button>
        <p class="wechat-modal__label">Scan to add on WeChat</p>
        <h2 class="wechat-modal__title" id="wechatModalTitle">ID: Vasilev_Ilia</h2>

        <div class="wechat-modal__qr-wrap">
          <img src="assets/wechat-qr.jpg" alt="WeChat QR code for Vasilev_Ilia" loading="lazy" />
        </div>

        <div class="wechat-modal__actions">
          <button class="wechat-btn" id="copyWechatId" type="button">Copy ID</button>
        </div>
      </div>
    </div>

    <script>
      (() => {
        const wechatLink = document.querySelector(".wechat-link");
        const modal = document.getElementById("wechatModal");
        const modalTitle = document.getElementById("wechatModalTitle");
        const closeModalNodes = modal?.querySelectorAll("[data-close-modal]");
        const copyIdButton = document.getElementById("copyWechatId");
        if (!wechatLink || !modal) return;

        const wechatId = wechatLink.getAttribute("data-wechat-id") || "Vasilev_Ilia";
        if (modalTitle) {
          modalTitle.textContent = `ID: ${wechatId}`;
        }

        const MODAL_TRANSITION_MS = 260;

        const copyToClipboard = async (value) => {
          try {
            await navigator.clipboard.writeText(value);
            return true;
          } catch (_error) {
            const textarea = document.createElement("textarea");
            textarea.value = value;
            textarea.setAttribute("readonly", "");
            textarea.style.position = "fixed";
            textarea.style.top = "-9999px";
            document.body.appendChild(textarea);
            textarea.select();
            const success = document.execCommand("copy");
            document.body.removeChild(textarea);
            return success;
          }
        };

        const openModal = () => {
          modal.hidden = false;
          document.body.classList.add("modal-open");
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              modal.classList.add("is-visible");
            });
          });
        };

        const closeModal = () => {
          modal.classList.remove("is-visible");
          setTimeout(() => {
            modal.hidden = true;
            document.body.classList.remove("modal-open");
          }, MODAL_TRANSITION_MS);
        };

        wechatLink.addEventListener("click", (event) => {
          event.preventDefault();
          openModal();
        });

        closeModalNodes?.forEach((node) => {
          node.addEventListener("click", closeModal);
        });

        document.addEventListener("keydown", (event) => {
          if (event.key === "Escape" && !modal.hidden) {
            closeModal();
          }
        });

        copyIdButton?.addEventListener("click", async () => {
          const defaultText = "Copy ID";
          const copied = await copyToClipboard(wechatId);
          if (copied) {
            copyIdButton.textContent = "Copied";
          } else {
            copyIdButton.textContent = "Copy failed";
          }
          setTimeout(() => {
            copyIdButton.textContent = defaultText;
          }, 1200);
        });

      })();
    </script>
  </body>
</html>
